## THIS YAML MUST BE VALID so check your changes for errors at https://jsonformatter.org/yaml-validator.
# PATH: src/main/resources/punishments/warn.yml
# Configuration for the internal warning system.
# Defines warning levels, expiration modes, and actions for each level.

# --- Available Placeholders ---
# - {target}: Target player's name.
# - {player}: Player executing the punishment.
# - {reason}: Reason for the warning.
# - {prefix}: Plugin prefix.
# - {associated_punishment_id:<type>}: ID of a punishment (mute/softban/ban) created by a warning level.

# --- Available Hook Actions ---
# - APPLY_MUTE:<duration>:<reason>
# - APPLY_SOFTBAN:<duration>:<reason>
# - APPLY_BAN:<duration>:<reason>
# - CONSOLE_COMMAND:<command>
# - PLAYER_COMMAND:<command>
# - PLAYER_COMMAND_OP:<command>
# - PLAY_SOUND:<sound>:<vol>:<pitch>
# - PLAY_SOUND_TARGET:<sound>:<vol>:<pitch>
# - TITLE:<title>:<subtitle>:<time>
# - TITLE_TARGET:<title>:<subtitle>:<time>
# - MESSAGE:<message>
# - MESSAGE_TARGET:<message>
# - ACTIONBAR:<message>
# - ACTIONBAR_TARGET:<message>
# - PLAY_SOUND_MODS:<sound>:<vol>:<pitch>
# - TITLE_MODS:<title>:<subtitle>:<time>
# - MESSAGE_MODS:<message>
# - ACTIONBAR_MODS:<message>
# - NO_ACTION:

# Configuration for the internal warning system.
use-internal: true
punish-command: 'warn {target} {reason}'
unpunish-command: 'unwarn {target}'
default-reason: "Warned by a moderator."
default-unpunish-reason: "Unwarned by a moderator."

# Expiration mode for warnings.
# 'unique': The newest warning supersedes and expires the previous one. The chain ends when the last warning expires.
# 'incremental': A new warning pauses the timer of the previous one. The previous timer resumes after the new one expires.
expiration-mode: 'incremental'

# Define warning levels dynamically. The key is the warning count (level).
# The system will apply the configuration for the total number of active warnings a player has.
# If a player's next warning level (e.g., 5) is not defined, the actions of the highest defined level (e.g., 4) will be applied.
levels:
  1:
    expiration: '1m'
    on-warn-actions:
      - 'MESSAGE_TARGET:&cYou have received your first warning for: &e{reason}'
      - 'MESSAGE_MODS:{prefix}&6{target} &7received warning #1 by &e{player}&7. Reason: &f{reason}'
    on-expire-actions:
      - 'MESSAGE_TARGET:&aYour first warning has expired or been removed.'

  2:
    expiration: '2m'
    # Use APPLY_MUTE to let the plugin handle mute creation and ID tracking.
    # Format: APPLY_MUTE:<duration>:<reason>
    on-warn-actions:
      - 'APPLY_MUTE:1h:Muted due to reaching warning level 2.'
      - 'MESSAGE_TARGET:&cYou have received your second warning for: &e{reason}&c. You are now muted for 1 hour.'
      - 'MESSAGE_MODS:{prefix}&6{target} &7received warning #2 by &e{player}&7. Muted for 1h.'
    # Use the associated punishment ID to unmute the correct punishment upon expiration.
    # The placeholder {associated_punishment_id:mute} will be replaced with the ID of the mute created by this warning.
    on-expire-actions:
      - 'CONSOLE_COMMAND:unpunish #{associated_punishment_id:mute} Warning level 2 expired.'
      - 'MESSAGE_TARGET:&aYour second warning has expired. Your mute has been lifted.'

  3:
    expiration: '3m'
    softban-blocked-commands:
      - kit
      - claim
      - reward
    # Use APPLY_SOFTBAN to handle softban creation and ID tracking.
    # Format: APPLY_SOFTBAN:<duration>:<reason>
    on-warn-actions:
      - 'APPLY_SOFTBAN:1d:Softbanned due to reaching warning level 3.'
      - 'MESSAGE_TARGET:&cYou have received your third warning for: &e{reason}&c. You are now softbanned for 1 day with limited commands.'
      - 'MESSAGE_MODS:{prefix}&6{target} &7received warning #3 by &e{player}&7. Softbanned for 1d.'
    on-expire-actions:
      - 'CONSOLE_COMMAND:unpunish #{associated_punishment_id:softban} Warning level 3 expired.'
      - 'MESSAGE_TARGET:&aYour third warning has expired. Your softban has been lifted.'

  4:
    expiration: '5m'
    # Use APPLY_BAN to handle ban creation and ID tracking.
    # Format: APPLY_BAN:<duration>:<reason>
    on-warn-actions:
      - 'APPLY_BAN:7d:Banned due to reaching warning level 4.'
      - 'MESSAGE_TARGET:&cYou have received your fourth warning for: &e{reason}&c. You have been banned for 7 days.'
      - 'MESSAGE_MODS:{prefix}&6{target} &7received warning #4 by &e{player}&7. Banned for 7d.'
    on-expire-actions:
      # Note: This will only run if the player is online when the warn expires. If they are banned, this action may not be useful.
      # It's here to demonstrate the placeholder functionality. A manual unban would likely be required.
      - 'CONSOLE_COMMAND:unpunish #{associated_punishment_id:ban} Warning level 4 expired.'
      - 'MESSAGE_MODS:{prefix}&aWarning #4 for {target} has expired. Their associated ban may need manual review if still active.'

# Post-action hooks for warn (generally unused when using levels)
#hooks:
#  on-punish:
#    - 'MESSAGE_MODS:{prefix}&6{target} &7was warned by &e{player}&7. Reason: &f{reason}'
#  on-unpunish:
#    - 'MESSAGE_MODS:{prefix}&a{target}&7''s warning was removed by &e{player}.'