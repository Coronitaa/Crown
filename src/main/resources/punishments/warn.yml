## THIS YAML MUST BE VALID so check your changes for errors at https://jsonformatter.org/yaml-validator.
# PATH: src/main/resources/punishments/warn.yml
# Configuration for the internal warning system.
# Defines warning levels, expiration modes, and actions for each level.

# --- Available Placeholders ---
# - {target}: Target player's name.
# - {player}: Player executing the punishment.
# - {reason}: Reason for the warning.
# - {prefix}: Plugin prefix.
# - {associated_punishment_id:<type>}: ID of a punishment (mute/softban/ban) created by a warning level.

# --- Available Hook Actions ---
# - APPLY_MUTE:<duration>:<reason>
# - APPLY_SOFTBAN:<duration>:<reason>
# - APPLY_BAN:<duration>:<reason>
# - CONSOLE_COMMAND:<command>
# - PLAYER_COMMAND:<command>
# - PLAYER_COMMAND_OP:<command>
# - PLAY_SOUND:<sound>:<vol>:<pitch>
# - PLAY_SOUND_TARGET:<sound>:<vol>:<pitch>
# - TITLE:<title>:<subtitle>:<time>
# - TITLE_TARGET:<title>:<subtitle>:<time>
# - MESSAGE:<message>
# - MESSAGE_TARGET:<message>
# - ACTIONBAR:<message>
# - ACTIONBAR_TARGET:<message>
# - PLAY_SOUND_MODS:<sound>:<vol>:<pitch>
# - TITLE_MODS:<title>:<subtitle>:<time>
# - MESSAGE_MODS:<message>
# - ACTIONBAR_MODS:<message>
# - NO_ACTION:

# Configuration for the internal warning system.
use-internal: true
punish-command: 'warn {target} {reason}'
unpunish-command: 'unwarn {target}'
default-reason: "Warned by a moderator."
default-unpunish-reason: "Unwarned by a moderator."

# Expiration mode for warnings.
# 'unique': The newest warning supersedes and expires the previous one. The chain ends when the last warning expires.
# 'incremental': A new warning pauses the timer of the previous one. The previous timer resumes after the new one expires.
expiration-mode: 'incremental'

# Define warning levels dynamically. The key is the warning count (level).
# The system will apply the configuration for the total number of active warnings a player has.
# If a player's next warning level (e.g., 5) is not defined, the actions of the highest defined level (e.g., 4) will be applied.
levels:
  1:
    expiration: '1m'
    on-warn-actions:
      - 'MESSAGE_TARGET:<color:#ff5555>You have received your first warning for: <color:#ffea00>{reason}</color></color>'
      - 'MESSAGE_MODS:{prefix}<color:#f5af19>{target}</color> <color:#b0b0b0>received warning #1 by <color:#ffea00>{player}</color>. Reason: <color:#ffffff>{reason}</color></color>'
    on-expire-actions:
      - 'MESSAGE_TARGET:<color:#00e676>Your first warning has expired or been removed.</color>'

  2:
    expiration: '2m'
    # Use APPLY_MUTE to let the plugin handle mute creation and ID tracking.
    # Format: APPLY_MUTE:<duration>:<reason>
    on-warn-actions:
      - 'APPLY_MUTE:1h:Muted due to reaching warning level 2.'
      - 'MESSAGE_TARGET:<color:#ff5555>You have received your second warning for: <color:#ffea00>{reason}</color>. You are now muted for 1 hour.</color>'
      - 'MESSAGE_MODS:{prefix}<color:#f5af19>{target}</color> <color:#b0b0b0>received warning #2 by <color:#ffea00>{player}</color>. Muted for 1h.</color>'
    # Use the associated punishment ID to unmute the correct punishment upon expiration.
    # The placeholder {associated_punishment_id:mute} will be replaced with the ID of the mute created by this warning.
    on-expire-actions:
      - 'CONSOLE_COMMAND:unpunish #{associated_punishment_id:mute} Warning level 2 expired.'
      - 'MESSAGE_TARGET:<color:#00e676>Your second warning has expired. Your mute has been lifted.</color>'

  3:
    expiration: '3m'
    softban-blocked-commands:
      - kit
      - claim
      - reward
    # Use APPLY_SOFTBAN to handle softban creation and ID tracking.
    # Format: APPLY_SOFTBAN:<duration>:<reason>
    on-warn-actions:
      - 'APPLY_SOFTBAN:1d:Softbanned due to reaching warning level 3.'
      - 'MESSAGE_TARGET:<color:#ff5555>You have received your third warning for: <color:#ffea00>{reason}</color>. You are now softbanned for 1 day with limited commands.</color>'
      - 'MESSAGE_MODS:{prefix}<color:#f5af19>{target}</color> <color:#b0b0b0>received warning #3 by <color:#ffea00>{player}</color>. Softbanned for 1d.</color>'
    on-expire-actions:
      - 'CONSOLE_COMMAND:unpunish #{associated_punishment_id:softban} Warning level 3 expired.'
      - 'MESSAGE_TARGET:<color:#00e676>Your third warning has expired. Your softban has been lifted.</color>'

  4:
    expiration: '5m'
    # Use APPLY_BAN to handle ban creation and ID tracking.
    # Format: APPLY_BAN:<duration>:<reason>
    on-warn-actions:
      - 'APPLY_BAN:7d:Banned due to reaching warning level 4.'
      - 'MESSAGE_TARGET:<color:#ff5555>You have received your fourth warning for: <color:#ffea00>{reason}</color>. You have been banned for 7 days.</color>'
      - 'MESSAGE_MODS:{prefix}<color:#f5af19>{target}</color> <color:#b0b0b0>received warning #4 by <color:#ffea00>{player}</color>. Banned for 7d.</color>'
    on-expire-actions:
      # Note: This will only run if the player is online when the warn expires. If they are banned, this action may not be useful.
      # It's here to demonstrate the placeholder functionality. A manual unban would likely be required.
      - 'CONSOLE_COMMAND:unpunish #{associated_punishment_id:ban} Warning level 4 expired.'
      - 'MESSAGE_MODS:{prefix}<color:#00e676>Warning #4 for {target} has expired. Their associated ban may need manual review if still active.</color>'

# Post-action hooks for warn (generally unused when using levels)
#hooks:
#  on-punish:
#    - 'MESSAGE_MODS:{prefix}&6{target} &7was warned by &e{player}&7. Reason: &f{reason}'
#  on-unpunish:
#    - 'MESSAGE_MODS:{prefix}&a{target}&7''s warning was removed by &e{player}.'